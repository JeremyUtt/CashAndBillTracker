NAME		:= app

SRC_DIR 	:= ./src
BUILD_DIR 	:= ./build
FONTS_DIR 	:= ./fonts
BIN_DIR		:= ./bin
INCLUDE_DIR := ./include

CPP_FILES := $(wildcard $(SRC_DIR)/*.cpp)
C_FILES := $(wildcard $(SRC_DIR)/*.c)
ASM_FILES := $(wildcard $(SRC_DIR)/*.asm)
OBJS := $(patsubst $(SRC_DIR)/%.cpp,$(BUILD_DIR)/%.o,$(CPP_FILES)) \
        $(patsubst $(SRC_DIR)/%.c,$(BUILD_DIR)/%.o,$(C_FILES)) \
		$(patsubst $(SRC_DIR)/%.asm,$(BUILD_DIR)/%.o,$(ASM_FILES)) \


CFLAGS :=  -I $(INCLUDE_DIR) -c -g
LFLAGS := -Llib -lglfw -lGL -limgui

all: $(BIN_DIR)/$(NAME)

# Link all Files
$(BIN_DIR)/$(NAME): $(OBJS)
	g++ -o $(BIN_DIR)/$(NAME) ./$< $(LFLAGS) -I/home/jeremy/GitRepos/imgui/ -I/home/jeremy/GitRepos/imgui/backends

# Compile All CPP files
$(BUILD_DIR)/%.o: $(SRC_DIR)/%.cpp
	g++ $(CFLAGS) -o $@ ./$< -I/home/jeremy/GitRepos/imgui/ -I/home/jeremy/GitRepos/imgui/backends

# Compile All C files
$(BUILD_DIR)/%.o: $(SRC_DIR)/%.c
	gcc $(CFLAGS) -o $@ ./$<

# Compile All ASM files
$(BUILD_DIR)/%.o: $(SRC_DIR)/%.asm
	nasm -f elf -o $@ ./$<

debug:
	@echo $(OBJS)
clean:
	@rm -rf $(BUILD_DIR)/* $(BIN_DIR)/*

run: all
	@./$(BIN_DIR)/$(NAME)

IMGUI_DIR := /home/jeremy/GitRepos/imgui
SOURCES += $(IMGUI_DIR)/imgui.cpp $(IMGUI_DIR)/imgui_demo.cpp $(IMGUI_DIR)/imgui_draw.cpp $(IMGUI_DIR)/imgui_tables.cpp $(IMGUI_DIR)/imgui_widgets.cpp
SOURCES += $(IMGUI_DIR)/backends/imgui_impl_glfw.cpp $(IMGUI_DIR)/backends/imgui_impl_opengl3.cpp
libs: $(SOURCES) 
	g++ -fPIC -shared $(SOURCES) -o lib/libimgui.so -I$(IMGUI_DIR)



# g++ src/main.cpp -L. -limgui -lGL -lglfw -o main -I/home/jeremy/GitRepos/imgui/ -I/home/jeremy/GitRepos/imgui/backends